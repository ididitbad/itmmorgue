#include <stdlib.h>

#include "array.h"
#include "gen.h"

char CASTLE_TOP[14][15] = {
	"###############" ,
	"#_____________#" ,
	"#____#___#____#" ,
	"#____#___#____#" ,
	"#____#___#____#" ,
	"#____#_F_#____#" ,
	"#____#___#____#" ,
	"#____#####____#" ,
	"#_____________#" ,
	"######___######" ,
	"     #___#     " ,
	"^ ^ ^#___#^ ^ ^" ,
	" ^ ^  #_#  ^ ^ " ,
	"^ ^ ^ 111 ^ ^ ^" 
};

char CASTLE_FRONT[23][74] = {
	"...........................                    ...........................",
	".#######..#######..#######.                    .#######..#######..#######.",
	".#_____#..#_____#..#_____#.                    .#_____#..#_____#..#_____#.",
	".##___##..##___##..##___##.                    .##___##..##___##..##___##.",
	"..#___#....#___#....#___#........................#___#....#___#....#___#..",
	" .#___######___######___###..####.4####4.####..###___######___######___#. ",
	" .#_______________________#..#__#.4+__+4.#__#..#_______________________#. ",
	" ..#______________________####__####__####__####______________________#.. ",
	"  ..#________________________________________________________________#..  ",
	"   ..#___#####____#####____________________________#####____#####___#..   ",
	"    .#___#___#____#___#____________________________#___#____#___#___#.    ",
	"    .#___#___#____#___#____________________________#___#____#___#___#.    ",
	"    .#___#___#____#___#____________####____________#___#____#___#___#.    ",
	"    .#___#_l_#____#_l_#_________###_##_###_________#_l_#____#_l_#___#.    ",
	"    .#___#___#____#___#_______###___##___###_______#___#____#___#___#.    ",
	"    .#___#####____#####______##_____##_____##______#####____#####___#.    ",
	"    .#_______________________+______##______+_______________________#.    ",
	"    .#_______________________#______##______#_______________________#.    ",
	"    .#_______________________#____#_##_#____#_______________________#.    ",
	"    .#_______________________+______##______+_____________________C_#.    ",
	"    .#_______________________#______##______#_______________________#.    ",
	"    .################################################################.    ",
	"    ..................................................................    "
};

char CASTLE_WTF[37][65] = {
	"                             .........                           ",
	"                          ....#######....                        ",
	"                        ...###___l___###...                      ",
	"                       ..##_____________##..                     ",
	"                       .##_______________##.                     ",
	"                      ..#_________________#..                    ",
	"                      .##_________________##.                    ",
	"              .........#___________________#.........            ",
	"             ..###########+#########################..           ",
	"             .#________#____________________________#......      ",
	"             .#_______#_____________________________#......      ",
	"             .#_______+_____________________________#......      ",
	"             .#_______#_______###############_______#......      ",
	"       .......#______#_____###_______###_____####___#.4.....     ",
	"   .....#######______#__###_____________###______#+###+####....  ",
	"  ..#####_____#______###___________________##_______#____#####.. ",
	"...##_____l___#______#_______________________#______+________##..",
	".##___________#______#_______________________#______#__________##",
	".#____________#______#___________#___________#______#___________#",
	".##___________#______#_________##____________#______#__________##",
	"...##_________+______#________##_____________#______#________##..",
	"  ..#####_____#_______##_C__##_____________###______#____#####.. ",
	"   .....########+#______####____________###__#______#######....  ",
	"       .......#___####_____###.......###_____#______#.......     ",
	"             .#_______######________________#_______#.           ",
	"             .#_____________________________#_______#.           ",
	"             .#_____________________________#_______#.           ",
	"             .#____________________________#___l____#.           ",
	"             ..#########################+###########..           ",
	"              .........#___________________#.........            ",
	"                      .##__________l______##.                    ",
	"                      ..#_________________#..                    ",
	"                       .##_______________##.                     ",
	"                       ..##_____________##..                     ",
	"                        ...###_______###...                      ",
	"                          ....#######....                        ",
	"                             .........                           ",
};

int main(int argc, char *argv[]) {
	
	array_t* T = read_level(DEFAULT);
	
	array_t* castle_top = copy_array((char*)CASTLE_TOP, 14, 15);
	array_t* castle_front = copy_array((char*)CASTLE_FRONT, 23, 74);
	array_t* castle_wtf = copy_array((char*)CASTLE_WTF, 37, 65);
	
	array_rotate(castle_top, DEFAULT);
	overlay_anywhere(castle_top, 2, ',');
	
	overlay_anywhere(castle_front, 0, 0);
	
	array_rotate(castle_wtf, rand_double(1) >= 0.5 ? 0 : 2);
	overlay_anywhere(castle_wtf, 0, 0);
	
	print_level(DEFAULT);
	
	free_array(castle_top);
	free_array(castle_front);
	free_array(castle_wtf);
	free(castle_top);
	free(castle_front);
	free(castle_wtf);
	free_array(T);
	free(_get_world_ref());
	
	return 0;
}
